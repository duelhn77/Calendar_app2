{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hiros/OneDrive%20-%20%E6%88%90%E7%94%B0%E5%BC%98/Tech0/VS%20Code/Git_Clone_calendar_app/Calendar_app2/src/components/BudgetEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport ConfirmModal from \"./ConfirmModal\"; // Âà•ÈÄî‰ΩúÊàê„ÅåÂøÖË¶Å\r\n\r\ntype ActivityRow = {\r\n  activityId: string;\r\n  activityName: string;\r\n  budget: number;\r\n};\r\n\r\ntype Props = {\r\n  engagement: string;\r\n};\r\n\r\nexport default function BudgetEditor({ engagement }: Props) {\r\n  const [activities, setActivities] = useState<ActivityRow[]>([]);\r\n  const [editedBudgets, setEditedBudgets] = useState<Record<string, string>>({});\r\n  const [selectedActivity, setSelectedActivity] = useState<string | null>(null);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n  // 1. „Éá„Éº„ÇøÂèñÂæó\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await fetch(\"/api/fetchBudgetAndActuals\");\r\n        const allData = await res.json();\r\n\r\n        const filtered = allData\r\n          .filter((d: any) => d.engagement === engagement)\r\n          .reduce((map: Record<string, ActivityRow>, row: any) => {\r\n            if (!map[row.activityId]) {\r\n              map[row.activityId] = {\r\n                activityId: row.activityId,\r\n                activityName: row.activity,\r\n                budget: row.budget,\r\n              };\r\n            }\r\n            return map;\r\n          }, {});\r\n\r\n          const activityList = Object.values(filtered).sort((a, b) =>\r\n            (a as ActivityRow).activityId.localeCompare((b as ActivityRow).activityId)\r\n          ) as ActivityRow[];\r\n          setActivities(activityList); // ‚úÖ Âûã„Ç®„É©„ÉºËß£Ê∂à\r\n          \r\n      } catch (err) {\r\n        console.error(\"‚ùå „Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:\", err);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [engagement]);\r\n\r\n  // 2. ÂÖ•ÂäõÂÄ§Êõ¥Êñ∞\r\n  const handleChange = (activityId: string, value: string) => {\r\n    setEditedBudgets({ ...editedBudgets, [activityId]: value });\r\n  };\r\n\r\n  // 3. „É¢„Éº„ÉÄ„É´Ë°®Á§∫\r\n  const handleUpdate = (activityId: string) => {\r\n    console.log(\"üü° Êõ¥Êñ∞„Éú„Çø„É≥Êäº‰∏ã - activityId:\", activityId);\r\n    setSelectedActivity(activityId);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  // 4. ÂÆüÈöõ„ÅÆÊõ¥Êñ∞Âá¶ÁêÜ\r\n  const confirmUpdate = async () => {\r\n    if (!selectedActivity) return;\r\n\r\n    const newBudget = editedBudgets[selectedActivity];\r\n    if (newBudget === undefined || isNaN(Number(newBudget))) {\r\n      alert(\"Êï∞ÂÄ§„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"/api/updateBudget\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          engagement,\r\n          activityId: selectedActivity,\r\n          newBudget: Number(newBudget),\r\n        }),\r\n      });\r\n\r\n      if (!res.ok) throw new Error(\"Êõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");\r\n\r\n      // Êõ¥Êñ∞ÂæåÂÜçÂèñÂæó\r\n      const updatedList = activities.map((act) =>\r\n        act.activityId === selectedActivity\r\n          ? { ...act, budget: Number(newBudget) }\r\n          : act\r\n      );\r\n      setActivities(updatedList);\r\n      setIsModalOpen(false);\r\n      alert(\"‚úÖ Êõ¥Êñ∞„Åó„Åæ„Åó„Åü\");\r\n    } catch (error) {\r\n      console.error(\"‚ùå Êõ¥Êñ∞Â§±Êïó:\", error);\r\n      alert(\"Êõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"border p-4 rounded shadow bg-white\">\r\n      <h3 className=\"text-lg font-semibold mb-4\">Ê¥ªÂãïÂà•‰∫àÁÆóÁ∑®ÈõÜÔºö{engagement}</h3>\r\n\r\n      <table className=\"w-full border-collapse\">\r\n        <thead>\r\n          <tr className=\"bg-gray-100\">\r\n            <th className=\"border p-2\">Activity ID</th>\r\n            <th className=\"border p-2\">ActivityÂêç</th>\r\n            <th className=\"border p-2\">‰∫àÁÆóÔºàhÔºâ</th>\r\n            <th className=\"border p-2\">Êìç‰Ωú</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {activities.map((act) => (\r\n            <tr key={act.activityId}>\r\n              <td className=\"border p-2\">{act.activityId}</td>\r\n              <td className=\"border p-2\">{act.activityName}</td>\r\n              <td className=\"border p-2\">\r\n                <input\r\n                  type=\"number\"\r\n                  value={editedBudgets[act.activityId] ?? act.budget.toString()}\r\n                  onChange={(e) => handleChange(act.activityId, e.target.value)}\r\n                  className=\"border px-2 py-1 w-24\"\r\n                />\r\n              </td>\r\n              <td className=\"border p-2\">\r\n                <button\r\n                  onClick={() => handleUpdate(act.activityId)}\r\n                  className=\"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded\"\r\n                >\r\n                  Êõ¥Êñ∞\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* <ConfirmModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        onConfirm={confirmUpdate}\r\n        message=\"‰∫àÁÆó„ÇíÊõ¥Êñ∞„Åó„Å¶„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü\"\r\n      /> */}\r\n      {isModalOpen && (\r\n  <div\r\n    className=\"fixed top-1/2 left-1/2 z-[9999] bg-white border-4 border-red-500 p-6 shadow-lg\"\r\n    style={{ transform: \"translate(-50%, -50%)\" }}\r\n  >\r\n    <p className=\"text-lg font-bold mb-4\">üß™ „ÉÜ„Çπ„Éà„É¢„Éº„ÉÄ„É´</p>\r\n    <p className=\"mb-4\">„Åì„Çå„ÅØ ConfirmModal „ÅÆ‰ª£„Çè„Çä„Å´Ë°®Á§∫„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ</p>\r\n    <button\r\n      className=\"bg-blue-500 text-white px-4 py-2 rounded\"\r\n      onClick={() => setIsModalOpen(false)}\r\n    >\r\n      Èñâ„Åò„Çã\r\n    </button>\r\n  </div>\r\n)}\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 278, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hiros/OneDrive%20-%20%E6%88%90%E7%94%B0%E5%BC%98/Tech0/VS%20Code/Git_Clone_calendar_app/Calendar_app2/src/app/budget-management/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport BudgetEditor from \"@/components/BudgetEditor\";\r\n\r\nexport default function BudgetManagement() {\r\n  const [engagements, setEngagements] = useState<string[]>([]);\r\n  const [selectedEngagement, setSelectedEngagement] = useState<string>(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchEngagements = async () => {\r\n      try {\r\n        const userId = localStorage.getItem(\"userId\");\r\n        if (!userId) throw new Error(\"„É¶„Éº„Ç∂„ÉºID„ÅåÊú™Ë®≠ÂÆö„Åß„Åô\");\r\n    \r\n        const res = await fetch(`/api/fetchEngagements?userId=${userId}`);\r\n        const data = await res.json();\r\n    \r\n        if (!Array.isArray(data)) {\r\n          throw new Error(\"API„É¨„Çπ„Éù„É≥„Çπ„ÅåÈÖçÂàó„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì: \" + JSON.stringify(data));\r\n        }\r\n    \r\n        const names = data.map((item: any) => item.name || item.EngagementÂêç);\r\n        setEngagements(names);\r\n      } catch (err) {\r\n        console.error(\"‚ùå EngagementÂèñÂæó„Ç®„É©„Éº:\", err);\r\n      }\r\n    };\r\n    \r\n    fetchEngagements();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-xl font-bold mb-4\">üí∞ ‰∫àÁÆóÁÆ°ÁêÜ</h2>\r\n      <div className=\"mb-4\">\r\n        <label className=\"block mb-2\">Engagement „ÇíÈÅ∏ÊäûÔºö</label>\r\n        <select\r\n          onChange={(e) => setSelectedEngagement(e.target.value)}\r\n          className=\"border p-2 rounded\"\r\n        >\r\n          <option value=\"\">-- ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ --</option>\r\n          {engagements.map((e) => (\r\n            <option key={e} value={e}>\r\n              {e}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {selectedEngagement && (\r\n        <BudgetEditor engagement={selectedEngagement} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAC3D,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAErE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,mBAAmB;YACvB,IAAI;gBACF,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,IAAI,CAAC,QAAQ,MAAM,IAAI,MAAM;gBAE7B,MAAM,MAAM,MAAM,MAAM,CAAC,6BAA6B,EAAE,QAAQ;gBAChE,MAAM,OAAO,MAAM,IAAI,IAAI;gBAE3B,IAAI,CAAC,MAAM,OAAO,CAAC,OAAO;oBACxB,MAAM,IAAI,MAAM,yBAAyB,KAAK,SAAS,CAAC;gBAC1D;gBAEA,MAAM,QAAQ,KAAK,GAAG,CAAC,CAAC,OAAc,KAAK,IAAI,IAAI,KAAK,WAAW;gBACnE,eAAe;YACjB,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,sBAAsB;YACtC;QACF;QAEA;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BACvC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAM,WAAU;kCAAa;;;;;;kCAC9B,8OAAC;wBACC,UAAU,CAAC,IAAM,sBAAsB,EAAE,MAAM,CAAC,KAAK;wBACrD,WAAU;;0CAEV,8OAAC;gCAAO,OAAM;0CAAG;;;;;;4BAChB,YAAY,GAAG,CAAC,CAAC,kBAChB,8OAAC;oCAAe,OAAO;8CACpB;mCADU;;;;;;;;;;;;;;;;;YAOlB,oCACC,8OAAC,kIAAA,CAAA,UAAY;gBAAC,YAAY;;;;;;;;;;;;AAIlC","debugId":null}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hiros/OneDrive%20-%20%E6%88%90%E7%94%B0%E5%BC%98/Tech0/VS%20Code/Git_Clone_calendar_app/Calendar_app2/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n    } else if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAQzC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1CJ,OAAOC,OAAO,GAAGC,QAAQ;QAC3B,OAAO,IAAIL,QAAQC,GAAG,CAACO,SAAS,EAAE;;QAIlC;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 407, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hiros/OneDrive%20-%20%E6%88%90%E7%94%B0%E5%BC%98/Tech0/VS%20Code/Git_Clone_calendar_app/Calendar_app2/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/hiros/OneDrive%20-%20%E6%88%90%E7%94%B0%E5%BC%98/Tech0/VS%20Code/Git_Clone_calendar_app/Calendar_app2/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}